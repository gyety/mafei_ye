一种常见的加锁约定是，将所有的可变状态都封装在对象内部，并通过对象的内置锁对所欲访问可变状态的代码路径进行同步，使得在该对象上不会发生并发访问。

对于每个包含多个变量的不变性条件，其中涉及的所有变量都需要由同一个锁来保护

当且仅当满足以下所有条件时，才应该使用Volatile变量：
对变量的写入操作不依赖变量的当前值，或者能确保只有单个线程更新变量的值
该变量不会与其他状态变量一起纳入不变性条件中
在访问变量时不需要加锁


Ad-hoc线程封闭
Ad-hoc线程封闭是指，维护线程的封闭特性的职责完全由程序实现来承担。

栈封闭是指，在栈封闭中， 只能通过局部变量才能访问对象。	